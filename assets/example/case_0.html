<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
</head>
<body>
  <script type="module">
    import algovivo from "https://cdn.jsdelivr.net/gh/juniorrojas/algovivo@cbd6216b37c93474800d7681dc9f3503d38ecfdc/build/algovivo.min.mjs";

    async function loadWasm() {
      const response = await fetch("https://cdn.jsdelivr.net/gh/juniorrojas/algovivo@cbd6216b37c93474800d7681dc9f3503d38ecfdc/build/algovivo.wasm");
      const wasm = await WebAssembly.instantiateStreaming(response);
      return wasm.instance;
    }

    async function main() {
      const system = new algovivo.System({
        wasmInstance: await loadWasm()
      });
      system.set({
        pos: [[1.762586236000061, 0.009999999776482582], [1.1349999904632568, 0.9899999499320984], [1.71732759475708, 1.6899999380111694], [2.387155055999756, 2.049999952316284], [2.9212069511413574, 1.7699999809265137], [3.3526723384857178, 1.1433333158493042], [3.497499942779541, 0.5099999904632568], [2.99965500831604, 0.009999999776482582], [2.5259482860565186, 0.7766666412353516]],
        triangles: [[0, 1, 2], [0, 2, 8], [2, 3, 8], [3, 4, 8], [4, 5, 8], [5, 6, 7], [5, 7, 8]],
        muscles: [[0, 1], [1, 2], [2, 3], [3, 4], [4, 5], [5, 6], [6, 7], [7, 8], [8, 0], [0, 2], [5, 7]]
      });

      const viewport = new algovivo.SystemViewport({ system });
      document.body.appendChild(viewport.domElement);

      let t = 0;

      
      let t_length = 100;
      let actions = [[0.5709725022315979, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.7362701892852783, 1.0, 0.47676706314086914], [0.27097249031066895, 1.0, 0.724795937538147, 1.0, 0.8357623219490051, 0.699999988079071, 0.8281122446060181, 0.9825614094734192, 0.43627017736434937, 1.0, 0.3354053199291229], [0.25, 1.0, 0.4871651232242584, 1.0, 0.5357623100280762, 0.42297208309173584, 0.5281122326850891, 0.8156325817108154, 0.7362701892852783, 1.0, 0.2674465775489807], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.5625325441360474, 1.0, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.2660657465457916, 1.0, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.25, 1.0, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.25, 1.0, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.25, 1.0, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.25, 1.0, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.25, 1.0, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.25, 1.0, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.25, 0.8693736791610718, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.2976876497268677, 0.695006251335144, 0.9450340270996094, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.35677197575569153, 0.7001756429672241, 0.6450340151786804, 0.25], [0.25, 1.0, 0.29829221963882446, 1.0, 0.25, 0.33002692461013794, 0.25, 0.32179754972457886, 0.40017563104629517, 0.6405182480812073, 0.25], [0.25, 1.0, 0.45181775093078613, 1.0, 0.4070156514644623, 0.3440934419631958, 0.35133829712867737, 0.405539333820343, 0.25, 0.5872511863708496, 0.3628508448600769], [0.25, 1.0, 0.25, 1.0, 0.39337193965911865, 0.25, 0.43489113450050354, 0.25, 0.25, 0.28725117444992065, 0.25], [0.25, 1.0, 0.2902718782424927, 1.0, 0.35857030749320984, 0.25, 0.7348911762237549, 0.478537917137146, 0.25, 0.33245763182640076, 0.25], [0.25, 1.0, 0.25, 1.0, 0.2564319968223572, 0.550000011920929, 0.7515901923179626, 0.3430944085121155, 0.25, 0.5809866189956665, 0.25], [0.25, 0.8970162272453308, 0.25, 1.0, 0.25, 0.4681316018104553, 1.0, 0.3424660563468933, 0.3109951615333557, 0.8809866309165955, 0.4330461621284485], [0.25, 1.0, 0.3606785535812378, 1.0, 0.25, 0.7519028186798096, 1.0, 0.25, 0.25, 0.9536199569702148, 0.7330461740493774], [0.25, 1.0, 0.26980024576187134, 1.0, 0.25, 0.9646056890487671, 1.0, 0.25, 0.370487242937088, 1.0, 0.7288765907287598], [0.25, 1.0, 0.329868346452713, 1.0, 0.25, 1.0, 1.0, 0.25, 0.25, 0.9082387685775757, 0.6325850486755371], [0.25, 1.0, 0.6298683881759644, 1.0, 0.3364734351634979, 0.8196988105773926, 1.0, 0.25, 0.25, 0.9067246913909912, 0.7023640871047974], [0.25, 1.0, 0.7595796585083008, 1.0, 0.25, 0.7075980305671692, 1.0, 0.25, 0.25, 0.8448669910430908, 0.518708348274231], [0.25, 1.0, 0.9613548517227173, 1.0, 0.25, 0.6223289966583252, 1.0, 0.25, 0.25, 0.7882820963859558, 0.5291147828102112], [0.25, 1.0, 1.0, 1.0, 0.25, 0.4476414620876312, 1.0, 0.25, 0.25, 0.6853989958763123, 0.5538647770881653], [0.25, 1.0, 0.7269978523254395, 1.0, 0.25, 0.25, 0.7255850434303284, 0.27143988013267517, 0.25, 0.8236100673675537, 0.4800071120262146], [0.25, 1.0, 0.663998007774353, 1.0, 0.25, 0.25, 0.709847092628479, 0.25, 0.25, 0.9821974635124207, 0.5715910196304321], [0.25, 1.0, 0.606593132019043, 1.0, 0.25, 0.25, 0.5824381709098816, 0.25, 0.3034869432449341, 1.0, 0.536463737487793], [0.25, 1.0, 0.4383755922317505, 1.0, 0.25, 0.25, 0.28243815898895264, 0.25, 0.25, 1.0, 0.3156224489212036], [0.25, 1.0, 0.25, 1.0, 0.3958107829093933, 0.25, 0.25, 0.25, 0.3931416869163513, 1.0, 0.25], [0.25, 0.9667329788208008, 0.25, 1.0, 0.3756087124347687, 0.4926145672798157, 0.25, 0.25, 0.6558927893638611, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.4648205041885376, 0.5422102808952332, 0.25, 0.25, 0.7098789215087891, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.3921288251876831, 0.25, 0.25, 0.6188465356826782, 0.8040096759796143, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.25, 0.6047984957695007, 0.9608124494552612, 0.27276521921157837], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.25, 0.8454958200454712, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.25425344705581665, 1.0, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.2963603138923645, 0.25, 0.5115745663642883, 0.9574077129364014, 0.9774253368377686, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.2796141803264618, 0.2991967499256134, 0.5631235241889954, 0.6574077010154724, 1.0, 0.3885612487792969], [0.25, 1.0, 0.25, 1.0, 0.25, 0.394511878490448, 0.329007625579834, 0.8474602699279785, 0.35740768909454346, 0.8720653057098389, 0.6881231665611267], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.4516875147819519, 0.732515275478363, 0.25, 1.0, 0.9881231784820557], [0.25, 1.0, 0.25, 0.8843902349472046, 0.25, 0.25, 0.331021785736084, 0.5375466346740723, 0.25, 1.0, 1.0], [0.25, 0.7423199415206909, 0.25, 1.0, 0.25, 0.5055776834487915, 0.5303611159324646, 0.2811969220638275, 0.25, 1.0, 1.0], [0.25, 1.0, 0.25, 1.0, 0.25, 0.8055776953697205, 0.7321381568908691, 0.25, 0.25, 0.9707415699958801, 0.9597681164741516], [0.25, 1.0, 0.296552449464798, 1.0, 0.25, 1.0, 0.7918682098388672, 0.28649330139160156, 0.25, 1.0, 0.7620291113853455], [0.25, 0.9196959733963013, 0.330235093832016, 1.0, 0.25, 1.0, 1.0, 0.25, 0.25, 0.699999988079071, 0.753314197063446], [0.25, 1.0, 0.25, 1.0, 0.36653220653533936, 1.0, 0.9486399292945862, 0.25, 0.25, 0.550260603427887, 0.6990639567375183], [0.25, 1.0, 0.40411436557769775, 1.0, 0.43069377541542053, 0.972203254699707, 0.7867326140403748, 0.39492762088775635, 0.376332551240921, 0.4814492464065552, 0.6242526173591614], [0.25, 1.0, 0.37295830249786377, 1.0, 0.5712805390357971, 1.0, 1.0, 0.2579590678215027, 0.25, 0.25, 0.3242526054382324], [0.25, 1.0, 0.43571966886520386, 1.0, 0.40635111927986145, 0.9172365069389343, 0.7424629926681519, 0.4964102804660797, 0.25, 0.25, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.6265512704849243, 0.4424629807472229, 0.26120591163635254, 0.43751060962677, 0.25, 0.25], [0.25, 1.0, 0.25, 1.0, 0.2822136878967285, 0.34788450598716736, 0.25, 0.25, 0.44737228751182556, 0.38682490587234497, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.25, 0.7473722696304321, 0.6868249177932739, 0.377494752407074], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.36379289627075195, 0.25, 0.801433265209198, 0.9868249297142029, 0.28136390447616577], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.6637929081916809, 0.25, 0.8280519247055054, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.7954660654067993, 0.25, 0.7062820792198181, 1.0, 0.36504119634628296], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.7252534627914429, 0.25, 0.619945228099823, 0.699999988079071, 0.41127151250839233], [0.25, 1.0, 0.25, 0.9998810291290283, 0.26239949464797974, 0.43774640560150146, 0.4824317991733551, 0.47489190101623535, 0.5794552564620972, 0.3999999761581421, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.7377464175224304, 0.25, 0.4293360114097595, 0.2794552445411682, 0.25, 0.25], [0.25, 1.0, 0.25, 1.0, 0.4481674134731293, 0.8285091519355774, 0.25, 0.7293360233306885, 0.25, 0.25, 0.25], [0.25, 1.0, 0.25, 1.0, 0.46223121881484985, 0.5978608727455139, 0.25, 1.0, 0.25, 0.25, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.43925216794013977, 0.25, 1.0, 0.25, 0.25, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.38913053274154663, 0.9727699756622314, 0.25, 0.37908935546875, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.3341374397277832, 0.6727699637413025, 0.25, 0.5861252546310425, 0.2625840902328491], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.5420678853988647, 0.25, 0.8496407866477966, 0.41804739832878113], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.2936253845691681, 0.2523394227027893, 0.8826877474784851, 0.47077566385269165], [0.25, 1.0, 0.25, 0.906644880771637, 0.25, 0.25, 0.25, 0.25, 0.368439644575119, 1.0, 0.3372705578804016], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.25, 0.5696799755096436, 1.0, 0.2646232545375824], [0.25, 1.0, 0.25, 0.8679087162017822, 0.25, 0.25, 0.4039495885372162, 0.25, 0.6864831447601318, 1.0, 0.25], [0.25, 1.0, 0.25, 0.5679087042808533, 0.25, 0.550000011920929, 0.34511351585388184, 0.2777358293533325, 0.3864831328392029, 0.833676278591156, 0.5187981128692627], [0.25, 1.0, 0.25, 0.8679087162017822, 0.25, 0.7782451510429382, 0.4196607768535614, 0.25, 0.25, 1.0, 0.4594864845275879], [0.25, 1.0, 0.25, 0.915581226348877, 0.25, 0.9069910049438477, 0.6091612577438354, 0.25, 0.25, 0.9023618698120117, 0.35853642225265503], [0.25, 1.0, 0.25, 1.0, 0.25, 0.8615544438362122, 0.729681134223938, 0.3536212146282196, 0.25, 0.9147369861602783, 0.29022806882858276], [0.25, 1.0, 0.25, 1.0, 0.25, 0.7402125597000122, 0.8040652871131897, 0.3017851412296295, 0.25, 0.6935272216796875, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.5201755166053772, 0.5228263139724731, 0.25, 0.25, 0.7263032793998718, 0.25], [0.25, 0.9403691291809082, 0.2525429129600525, 1.0, 0.25891557335853577, 0.25, 0.5333105325698853, 0.25, 0.25, 1.0, 0.25], [0.25, 1.0, 0.2609099745750427, 0.9696488380432129, 0.3139680325984955, 0.25, 0.3789324462413788, 0.25, 0.5136443376541138, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.25, 0.6566788554191589, 1.0, 0.3368433117866516], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.2930368185043335, 0.25, 0.35667884349823, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.29945218563079834, 0.2514391839504242, 0.45172709226608276, 0.43882495164871216, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.25943616032600403, 0.3829166293144226, 0.9428693056106567, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.25, 0.5611298084259033, 0.6428692936897278, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.2645639479160309, 0.25, 0.25, 0.6359499096870422, 0.6664658188819885, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.25, 0.6462651491165161, 0.72447270154953, 0.2841308116912842], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25192323327064514, 0.25, 0.25, 0.9462651610374451, 0.677143931388855, 0.25], [0.251623272895813, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.5111058354377747, 1.0, 0.5350708961486816, 0.4050499498844147], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.4940890669822693, 0.44489312171936035, 0.7351822257041931, 0.34650105237960815, 0.2529909908771515], [0.25, 1.0, 0.25, 0.9417901039123535, 0.3358112871646881, 0.25, 0.6321938037872314, 0.5665926933288574, 0.43518221378326416, 0.25, 0.5028308629989624], [0.25, 1.0, 0.25, 0.9986428618431091, 0.25, 0.25, 0.49115315079689026, 0.5006202459335327, 0.3406323492527008, 0.25, 0.3407198190689087], [0.2799064517021179, 1.0, 0.25, 1.0, 0.35452067852020264, 0.25, 0.5349093675613403, 0.5740386247634888, 0.5922932624816895, 0.550000011920929, 0.4045661687850952], [0.25, 1.0, 0.25, 0.9976338744163513, 0.3390856385231018, 0.27740514278411865, 0.7025858759880066, 0.6432158946990967, 0.5201066732406616, 0.4272618591785431, 0.3642997443675995], [0.25, 1.0, 0.25, 1.0, 0.39810988306999207, 0.25, 0.9428398013114929, 0.5826495885848999, 0.25, 0.25, 0.25], [0.25, 1.0, 0.4125092923641205, 1.0, 0.26362478733062744, 0.25, 0.913966178894043, 0.7586222290992737, 0.25, 0.25, 0.25], [0.25, 1.0, 0.37987059354782104, 1.0, 0.25, 0.25, 0.8280508518218994, 0.5530641078948975, 0.25, 0.44412457942962646, 0.550000011920929], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.7507133483886719, 0.6164693832397461, 0.25, 0.4625673294067383, 0.42846882343292236], [0.25, 1.0, 0.4643990993499756, 0.872775673866272, 0.25, 0.5052956342697144, 1.0, 0.4194508194923401, 0.25, 0.3386842608451843, 0.25], [0.25, 0.9900987148284912, 0.5549267530441284, 1.0, 0.25, 0.44209426641464233, 1.0, 0.25, 0.25, 0.4632907211780548, 0.51334547996521], [0.25, 1.0, 0.5907421708106995, 0.8385307788848877, 0.35961833596229553, 0.2920660376548767, 0.8596495389938354, 0.550000011920929, 0.25, 0.274923175573349, 0.45477059483528137], [0.550000011920929, 1.0, 0.8228670358657837, 0.775390088558197, 0.25, 0.3357396125793457, 0.907738447189331, 0.29981860518455505, 0.25, 0.25, 0.614732563495636]];
      setInterval(() => {
          system.a.set(
            actions[t]
          );    
        t++;
        t %= t_length;

        system.step();
        viewport.render();
      }, 1000 / 30);

      
    }

    main();
  </script>
</body>
</html>