<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
</head>
<body>
  <script type="module">
    import algovivo from "https://cdn.jsdelivr.net/gh/juniorrojas/algovivo@cbd6216b37c93474800d7681dc9f3503d38ecfdc/build/algovivo.min.mjs";

    async function loadWasm() {
      const response = await fetch("https://cdn.jsdelivr.net/gh/juniorrojas/algovivo@cbd6216b37c93474800d7681dc9f3503d38ecfdc/build/algovivo.wasm");
      const wasm = await WebAssembly.instantiateStreaming(response);
      return wasm.instance;
    }

    async function main() {
      const system = new algovivo.System({
        wasmInstance: await loadWasm()
      });
      system.set({
        pos: [[1.762586236000061, 0.009999999776482582], [1.1349999904632568, 0.9899999499320984], [1.71732759475708, 1.6899999380111694], [2.387155055999756, 2.049999952316284], [2.9212069511413574, 1.7699999809265137], [3.3526723384857178, 1.1433333158493042], [3.497499942779541, 0.5099999904632568], [2.99965500831604, 0.009999999776482582], [2.5259482860565186, 0.7766666412353516]],
        triangles: [[0, 1, 2], [0, 2, 8], [2, 3, 8], [3, 4, 8], [4, 5, 8], [5, 6, 7], [5, 7, 8]],
        muscles: [[0, 1], [1, 2], [2, 3], [3, 4], [4, 5], [5, 6], [6, 7], [7, 8], [8, 0], [0, 2], [5, 7]]
      });

      const viewport = new algovivo.SystemViewport({ system });
      document.body.appendChild(viewport.domElement);

      let t = 0;

      
      let t_length = 100;
      let actions = [[0.7981579303741455, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.6771088242530823, 0.2763972282409668, 0.915269672870636], [0.5644455552101135, 1.0, 0.7033601999282837, 1.0, 0.699999988079071, 0.699999988079071, 0.8784047365188599, 0.699999988079071, 0.7018994688987732, 0.25, 0.615269660949707], [0.26444554328918457, 1.0, 0.5645931363105774, 1.0, 0.3999999761581421, 0.4431658685207367, 0.8161389231681824, 0.3999999761581421, 0.5050234794616699, 0.40654054284095764, 0.5428034663200378], [0.25, 1.0, 0.26459312438964844, 1.0, 0.25, 0.25, 0.6704484820365906, 0.25, 0.6223305463790894, 0.4936884045600891, 0.5413860082626343], [0.25, 1.0, 0.25, 0.8847238421440125, 0.25, 0.3208587169647217, 0.9270472526550293, 0.25, 0.6466506719589233, 0.43823549151420593, 0.35742461681365967], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.6270472407341003, 0.25, 0.3466506600379944, 0.3266739249229431, 0.25], [0.3573892116546631, 1.0, 0.25, 1.0, 0.25, 0.25, 0.46869492530822754, 0.25, 0.37543296813964844, 0.5660579204559326, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.2971937358379364, 0.3331869840621948, 0.25, 0.4687606394290924, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.25, 0.34340253472328186, 0.7499207258224487, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25753700733184814, 0.35053181648254395, 0.25, 0.887641966342926, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.25, 0.3796153664588928, 1.0, 0.25], [0.25, 0.9568295478820801, 0.25, 0.9140712022781372, 0.25, 0.25, 0.25, 0.25, 0.25, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.25, 0.25, 1.0, 0.25], [0.25, 0.9952846765518188, 0.25, 1.0, 0.25, 0.25, 0.4383506774902344, 0.25, 0.25, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.3026552200317383, 0.2657797336578369, 0.43221625685691833, 1.0, 0.32321739196777344], [0.25, 1.0, 0.25, 0.9827449917793274, 0.25, 0.25, 0.5941041707992554, 0.25, 0.3537769019603729, 1.0, 0.25], [0.25, 0.9344495534896851, 0.25, 1.0, 0.31135910749435425, 0.25, 0.4932551980018616, 0.26306530833244324, 0.6537768840789795, 1.0, 0.25], [0.25, 0.7807971835136414, 0.25, 0.7443897724151611, 0.25, 0.25, 0.7932552099227905, 0.25, 0.35377687215805054, 0.717553973197937, 0.25], [0.25, 1.0, 0.25, 1.0, 0.36054864525794983, 0.25, 0.6128017902374268, 0.31363165378570557, 0.48127269744873047, 1.0, 0.2870505452156067], [0.25, 0.9580987095832825, 0.25, 1.0, 0.33344921469688416, 0.33415114879608154, 0.9105889797210693, 0.25, 0.25, 0.7928948402404785, 0.25], [0.25, 0.9845153093338013, 0.25, 1.0, 0.34351590275764465, 0.25, 0.6105889678001404, 0.25, 0.550000011920929, 1.0, 0.3239799439907074], [0.25, 0.6845152974128723, 0.25, 1.0, 0.25, 0.550000011920929, 0.9105889797210693, 0.25, 0.25, 0.9643486142158508, 0.25], [0.25, 0.626722514629364, 0.25, 1.0, 0.3095267415046692, 0.25, 0.7322690486907959, 0.25, 0.47196733951568604, 1.0, 0.550000011920929], [0.25, 0.9185513257980347, 0.25, 0.8609364032745361, 0.2684841752052307, 0.4101545512676239, 1.0, 0.25, 0.25, 0.699999988079071, 0.25], [0.25, 0.7302898168563843, 0.25, 1.0, 0.25, 0.25, 0.699999988079071, 0.25, 0.550000011920929, 1.0, 0.25], [0.25, 0.4302898049354553, 0.25, 1.0, 0.25, 0.25, 1.0, 0.25, 0.5746566653251648, 1.0, 0.25], [0.25, 0.2912101745605469, 0.25, 1.0, 0.25, 0.25, 0.8505024909973145, 0.25, 0.8746566772460938, 1.0, 0.25], [0.25, 0.25201845169067383, 0.25, 0.96555095911026, 0.25, 0.25, 1.0, 0.25, 0.789836049079895, 0.7577826380729675, 0.25], [0.25, 0.39827296137809753, 0.25, 1.0, 0.25, 0.25, 0.699999988079071, 0.25, 1.0, 1.0, 0.25], [0.25, 0.6918610334396362, 0.25, 1.0, 0.25, 0.3558310866355896, 0.7660825252532959, 0.25, 0.7508721351623535, 0.7142454981803894, 0.25], [0.25, 0.7466945052146912, 0.25, 1.0, 0.33815425634384155, 0.25, 0.46608251333236694, 0.25, 1.0, 1.0, 0.25], [0.25, 0.684159517288208, 0.25, 1.0, 0.25, 0.3473159670829773, 0.6272450089454651, 0.25, 0.699999988079071, 0.699999988079071, 0.25], [0.25, 0.9155035018920898, 0.25, 1.0, 0.382914662361145, 0.25, 0.4250369668006897, 0.25, 1.0, 1.0, 0.2805103361606598], [0.25, 0.9526979327201843, 0.25, 1.0, 0.4880830645561218, 0.4129670262336731, 0.5284624099731445, 0.5361002683639526, 0.8135757446289062, 0.7855844497680664, 0.25], [0.25, 1.0, 0.25, 1.0, 0.5175420641899109, 0.25, 0.4907439649105072, 0.39743512868881226, 0.5135757327079773, 1.0, 0.38575229048728943], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.5384384393692017, 0.25, 0.25, 0.8451082110404968, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.6518070101737976, 0.25, 0.550000011920929, 1.0, 0.5087926983833313], [0.25, 0.958467960357666, 0.25, 0.927111029624939, 0.25, 0.25476202368736267, 0.9518070220947266, 0.25, 0.25, 0.9248097538948059, 0.25], [0.25, 1.0, 0.25, 1.0, 0.5115718841552734, 0.25, 0.6518070101737976, 0.25, 0.550000011920929, 1.0, 0.25], [0.25, 1.0, 0.25, 0.7964627146720886, 0.38743671774864197, 0.4242764413356781, 0.9518070220947266, 0.25, 0.2515270709991455, 0.699999988079071, 0.25], [0.25, 0.9671463966369629, 0.25, 1.0, 0.48255643248558044, 0.25, 0.8865530490875244, 0.25, 0.5515270829200745, 1.0, 0.4316572844982147], [0.25, 0.9424347281455994, 0.25, 0.9225295782089233, 0.2556720972061157, 0.550000011920929, 1.0, 0.25, 0.2515270709991455, 0.699999988079071, 0.25], [0.25, 0.8299949765205383, 0.25, 1.0, 0.25160712003707886, 0.25, 0.9860240817070007, 0.25, 0.5515270829200745, 1.0, 0.4373423457145691], [0.25, 0.7090563774108887, 0.25256016850471497, 0.7134627103805542, 0.25, 0.550000011920929, 1.0, 0.25, 0.33471065759658813, 0.8187150955200195, 0.25], [0.25, 0.9980345964431763, 0.25, 1.0, 0.25, 0.25, 0.699999988079071, 0.2695709764957428, 0.6347106695175171, 1.0, 0.25], [0.25, 1.0, 0.25, 0.9793350100517273, 0.2960183024406433, 0.5208356380462646, 0.8435054421424866, 0.25, 0.92067551612854, 0.699999988079071, 0.25], [0.25, 1.0, 0.25, 1.0, 0.2730841040611267, 0.25, 0.6058179140090942, 0.25, 1.0, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.3281347453594208, 0.550000011920929, 0.8224867582321167, 0.25, 1.0, 0.699999988079071, 0.25], [0.25, 1.0, 0.25, 1.0, 0.4667436480522156, 0.25, 0.7786079049110413, 0.3797520399093628, 1.0, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.5522858500480652, 0.550000011920929, 0.8546022772789001, 0.3155249059200287, 1.0, 0.874822735786438, 0.25], [0.25, 1.0, 0.25, 1.0, 0.8415199518203735, 0.25, 0.9138663411140442, 0.2502857446670532, 0.895112931728363, 1.0, 0.25], [0.25, 1.0, 0.25, 0.7564249634742737, 0.7046521902084351, 0.46917402744293213, 0.6138663291931152, 0.25, 0.9646315574645996, 0.7595449686050415, 0.25], [0.25, 1.0, 0.25, 1.0, 0.8385170698165894, 0.25, 0.47404661774635315, 0.5032014846801758, 0.6646315455436707, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.7887582182884216, 0.44608527421951294, 0.25, 0.27778664231300354, 0.6044481992721558, 0.7409309148788452, 0.25], [0.25, 1.0, 0.25, 1.0, 0.5851461887359619, 0.25, 0.2954258322715759, 0.26691389083862305, 0.3044481873512268, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.28514617681503296, 0.550000011920929, 0.25, 0.26555076241493225, 0.6044481992721558, 0.8919668793678284, 0.25], [0.25, 1.0, 0.25, 1.0, 0.5729955434799194, 0.25, 0.271213561296463, 0.25, 0.3044481873512268, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.3335265815258026, 0.3467419743537903, 0.25, 0.25, 0.4399257004261017, 0.8132007122039795, 0.25], [0.25, 1.0, 0.25, 1.0, 0.38414081931114197, 0.25, 0.36025574803352356, 0.4368639588356018, 0.4379135072231293, 1.0, 0.25], [0.25, 1.0, 0.25, 0.9210439920425415, 0.35910168290138245, 0.4518035650253296, 0.25, 0.25, 0.33383679389953613, 0.699999988079071, 0.25], [0.25, 1.0, 0.25, 1.0, 0.44112348556518555, 0.25, 0.3165716528892517, 0.35776597261428833, 0.25, 1.0, 0.25], [0.25, 1.0, 0.25, 0.8861983418464661, 0.3398818373680115, 0.49227777123451233, 0.25, 0.25, 0.25, 0.699999988079071, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.25, 0.25, 1.0, 0.25], [0.25, 1.0, 0.25, 0.9969314932823181, 0.25, 0.4910127818584442, 0.25, 0.25, 0.4725136160850525, 0.8149107694625854, 0.25], [0.25, 0.9098770022392273, 0.25, 1.0, 0.550000011920929, 0.25, 0.47958657145500183, 0.41559112071990967, 0.25, 1.0, 0.25], [0.25, 1.0, 0.25, 0.7688518166542053, 0.25, 0.550000011920929, 0.25, 0.4158269464969635, 0.4599432051181793, 0.7654414772987366, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.550000011920929, 0.4349067509174347, 0.347135066986084, 1.0, 0.3088110089302063], [0.25, 1.0, 0.25, 1.0, 0.25, 0.4704482853412628, 0.8117600679397583, 0.25, 0.36773309111595154, 0.699999988079071, 0.25], [0.25, 0.9354104399681091, 0.25, 1.0, 0.25, 0.25, 0.854680061340332, 0.26280832290649414, 0.25, 1.0, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.550000011920929, 0.7613025903701782, 0.25, 0.2876855731010437, 0.699999988079071, 0.25], [0.25, 0.926425039768219, 0.25, 1.0, 0.25, 0.25, 0.8473315238952637, 0.25, 0.2759951949119568, 0.7336292862892151, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.550000011920929, 0.9537666440010071, 0.25, 0.37981489300727844, 0.4437251091003418, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 1.0, 0.3218153715133667, 0.25, 0.5647882223129272, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.8482428789138794, 0.25, 0.30049633979797363, 0.2647882103919983, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.7230516076087952, 0.25, 0.38430076837539673, 0.40122485160827637, 0.25], [0.25, 1.0, 0.25, 0.9241666793823242, 0.25, 0.3185943365097046, 0.5317850112915039, 0.25, 0.45795226097106934, 0.25, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.3902021646499634, 0.25, 0.25, 0.25, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.4312252700328827, 0.25, 0.25, 0.25, 0.25], [0.25, 0.9591295123100281, 0.25, 1.0, 0.25, 0.3099633455276489, 0.5596677660942078, 0.25, 0.25, 0.25, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.4428331255912781, 0.6007533669471741, 0.25, 0.25, 0.25, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.5214395523071289, 0.8672780990600586, 0.25, 0.25, 0.25, 0.25], [0.25, 1.0, 0.25, 0.9270706176757812, 0.25, 0.31471413373947144, 0.689498782157898, 0.25, 0.25, 0.25, 0.25], [0.25, 1.0, 0.25, 1.0, 0.4443535804748535, 0.25, 0.5367936491966248, 0.25, 0.25, 0.25, 0.25], [0.25, 1.0, 0.25, 0.699999988079071, 0.4206438660621643, 0.3251374065876007, 0.25, 0.25, 0.37525302171707153, 0.25, 0.36738869547843933], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.49538910388946533, 0.25, 0.25, 0.25], [0.25, 1.0, 0.25, 0.878434956073761, 0.25, 0.25, 0.2617611885070801, 0.3041004538536072, 0.25, 0.25, 0.550000011920929], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.2951469123363495, 0.25, 0.25, 0.25, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25], [0.25, 0.8677706122398376, 0.25, 1.0, 0.2648458480834961, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.26289254426956177, 0.25, 0.25, 0.25, 0.4112498164176941], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.4409022331237793, 0.3435247242450714, 0.25, 0.25, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.3292456269264221, 0.25, 0.25, 0.25, 0.25619757175445557, 0.3959561884403229], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.550000011920929, 0.25, 0.25, 0.25, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.36865055561065674, 0.5444016456604004, 0.25, 0.25125691294670105, 0.25, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.2898493707180023, 0.5157391428947449, 0.25, 0.25, 0.25, 0.25], [0.3308807611465454, 1.0, 0.25, 1.0, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.3955613076686859, 0.33793705701828003, 0.25, 0.25, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.25, 0.31387487053871155, 0.25, 0.25, 0.3195754289627075, 0.4192759692668915], [0.25, 1.0, 0.25, 1.0, 0.31318825483322144, 0.4452197849750519, 0.3467598259449005, 0.25, 0.25, 0.25, 0.25], [0.25, 1.0, 0.25, 1.0, 0.25, 0.4388434886932373, 0.25, 0.25, 0.25, 0.25, 0.25]];
      setInterval(() => {
          system.a.set(
            actions[t]
          );    
        t++;
        t %= t_length;

        system.step();
        viewport.render();
      }, 1000 / 30);

      
    }

    main();
  </script>
</body>
</html>